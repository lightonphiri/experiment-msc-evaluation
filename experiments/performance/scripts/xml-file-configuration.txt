XML-File

Step 1: Install mod_perl
sudo apt-get install libapache2-mod-perl2

Step 2: Put code below in /etc/apache2/sites-available/default

    # enable mod_perl
    <Files ~ "\.(pl|cgi)$">
       SetHandler perl-script
       PerlResponseHandler ModPerl::Registry
       Options +ExecCGI
       PerlSendHeader On
    </Files>



Step 3: Configure data provider


 -> /var/www/OAI-XMLFile-2.21/XMLFile/w1/config.xml
    archive specific configuration details
    
 -> /var/www/OAI-XMLFile-2.21/XMLFile/w1/oai.pl
    my $OAI = new XMLFile::XMLFileDP ('/var/www/OAI-XMLFile-2.21/XMLFile/ndltd-simplyct/config.xml');
    
    


Step 4: Populate other workloads

  -> populate other workloads using template (w1)
    -> for workload in `seq 2 15`; do sudo cp -rv w1 w$workload; done
  -> delete template archive data
    -> for workload in `seq 2 15`; do sudo rm -rf w$workload/data/*; done
  -> populate workloads with actual datasets
    -> nohup sh -c 'for workload in `seq 2 15`; do sudo cp -r /home/phiri/Projects/masters/workload/w$workload/chunked/* /var/www/OAI-XMLFile-2.21/XMLFile/w$workload/data/; done' &
      -> Errors 
	-> cp: cannot create regular file; No space left on device [ran out of inodes ***]
	-> 
    -> 
  -> 


export http_proxy="http://localhost:3128"
export https_proxy="http://localhost:3128"
export ftp_proxy="http://localhost:3128"

  

Step 5: Use ApacheBench
  -> ab -n 5 http://localhost/OAI-XMLFile-2.21/XMLFile/w1/oai.pl?verb=ListRecords\&metadataPrefix=oai_dc | grep "Time per request"
  -> 
  -> apr_poll: The timeout specified has expired (70007) [at workoad w12]
  -> 
  -> 
  -> GetRecord: oai-union.ndltd.org-TW--090NCTU0423019.metadata
    -> 
  -> 



Useful Computations
  -> Count number of sets
    -> for workload in `seq 1 13`; do find w$workload/data/* -maxdepth 1 -type d | wc -l; done
  -> 
  -> 
  -> Count tags
    -> for workload in `ls -1 | grep w`; do i=0; for file in `find $workload/chunked/* -type f | grep metadata`; do let i=i+`cat $file | grep "<dc:creator>" | wc -l`; done; echo $i; done
    -> for workload in `ls -1 | grep w`; do i=0; for file in `find $workload/chunked/* -type f | grep metadata`; do let i=i+`cat $file | grep -n "<dc:creator>" | head -n 1 | wc -l`; done; echo $workload":::"$i; done [DUPLICATES REMOVED]
  -> 

  
  
  copenhagen suborbitals


  
  
Benchmarking Process
  -> Vanilla Workload
    -> restart apache2& reboot machine
    -> nohup ./oaipmh-benchmark.sh > ~/Projects/masters/results/oaipmh-workload-vanilla-20121219.txt&
  
  -> cat oaipmh-workload-3-hierachy.txt | grep bytes | awk '{print $1","$2","$3":::"$4","$5":::"$6","$7","$8}' > oaipmh-workload-3-hierachy-results.csv
  
  
  
  
  
  
  
  
Bank Name	First National Bank
Branch Name	Corporate Account Services - Durban
Account Name	Momentum Health Student Account
Account Type	Current
Account Number	62074402703
Branch Code	223626
Bank Code/Swift Code	FIRNZAJJ
Reference Number	6802516
Please ensure that your membership number is used as a reference number on the deposit slip
  
  
  
  
  
  
  
  
  
  